<!-- Settings Modal -->
<div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="settingsModalLabel">
                  <span class="material-symbols-outlined">settings</span>
                   Settings
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="settings-section">
                  <h6 class="settings-heading"></h6>
                  <div class="form-group">
                      <label for="numProponents">Number of Proponents per Project Group:</label>
                      <input type="number" id="numProponents" class="form-control" value="3" min="1" max="10">
                  </div>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" id="saveSettings">Save Changes</button>
          </div>
      </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    fetch("{% url 'project_group_settings' %}")  // Define a new view to fetch settings
        .then(response => response.json())
        .then(data => {
            if (data.maxProponents) {
                document.getElementById('numProponents').value = data.maxProponents;
            }
        });
});

  document.getElementById('saveSettings').addEventListener('click', function() {
    const numProponents = document.getElementById('numProponents').value;

    // Send AJAX request to save settings
    fetch("{% url 'save_project_group_settings' %}", {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}', // Include CSRF token for security
        },
        body: JSON.stringify({
            numProponents: numProponents
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Settings updated successfully!');
            // Optionally reload or update the UI dynamically
            location.reload();
        } else {
            alert(`Error saving settings: ${data.error || "Unknown error"}`);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error saving settings.');
    });
});

</script>
           {% comment %}  <div class="settings-section">
            <h6 class="settings-heading">Display Preferences</h6>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="darkModeToggle">
              <label class="form-check-label" for="darkModeToggle">Dark Mode</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="compactViewToggle">
              <label class="form-check-label" for="compactViewToggle">Compact View</label>
            </div>
          </div>
  
          <div class="settings-section">
            <h6 class="settings-heading">Notifications</h6>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="emailNotifications">
              <label class="form-check-label" for="emailNotifications">Email Notifications</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="desktopNotifications">
              <label class="form-check-label" for="desktopNotifications">Desktop Notifications</label>
            </div>
          </div>
  
        <div class="settings-section">
            <h6 class="settings-heading">Dashboard Layout</h6>
            <select class="form-select mb-3" id="defaultView">
              <option value="grid">Grid View</option>
              <option value="list">List View</option>
            </select>
          </div>
        </div> {% endcomment %}
