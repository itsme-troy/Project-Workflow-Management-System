{% extends 'project/base.html'%} <!-- use the base file -->
{% load static %}

{% block content %} <!-- content of all web pages go -->


<div class="table-container"> 
        
    <div style="display: flex; justify-content: space-between; align-items: center;"> <!-- Flex container for header and button -->
        <h1 style="display: inline-block;"> My Project </h1> <!-- Keep the title inline -->
        {% if not project %} <!-- Check if there are no projects -->
        <!-- Add Proposal Button -->
        <div class="button-container"> <!-- Button container -->
            <a href="{% url 'add-project' %}" class="btn btn-add-proposal">
                <i class="fas fa-plus"></i> Submit Proposal
            </a>
        </div>
        {% endif %}
    </div>

    <table class ="table table-striped table-hover table-bordered table"> 
        <thead> 
        <tr> 
            
            <th scope="col"> # </th> 
            <th scope="col"> Project Name  </th> 
            <th scope="col"> Adviser </th> 
            <th scope="col"> Project Group </th>
            <th scope="col">Panel 1</th>
            <th scope="col">Panel 2</th>
            <th scope="col">Panel 3 </th>
            <th scope="col"> Project Type  </th> 
            <th scope="col"> Status  </th> 
        </tr> 
    </thead>  
    <tbody>

        {% if project %} 
                <tr>
                    <td> <strong> 1 </strong>  </td> 
                    <td> <a href ="{% url 'show-project' project.id %}" > {{ project.title}} </a>  </td> 
                    <td class="{% if project.adviser == user %}table-warning{% endif %}">  {{ project.adviser}} </td> 
                    <td>  {{ project.proponents}} </td>
                    <td>
                        {% if project.panel1 %}
                            {{ project.panel1.first_name }} {{ project.panel1.last_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>
                        {% if project.panel2 %}
                            {{ project.panel2.first_name }} {{ project.panel2.last_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>
                        {% if project.panel3 %}
                            {{ project.panel3.first_name }} {{ project.panel3.last_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                    <td>  {{ project.project_type}} </td>
                    <td><span class="badge 
                                {% if project.status == 'approved' %}
                                    bg-success
                                {% elif project.status == 'pending' %}
                                    bg-warning text-dark
                                {% elif project.status == 'declined' %}
                                    bg-danger
                                {% else %}
                                    bg-secondary
                                {% endif %}"> {{ project.status }}
                            </span>  </td>
                </tr> 
            
        {% else %}

        <div class="alert alert-error text-center" role="alert">
            <h2> You Have No Approved Project yet. </h2>
        </div>
        {% endif %}


    </tbody> <!-- Closing tbody tag added -->
    </table>     
    <br/> <!-- Moved outside of the table -->
    <hr/> <br/>
</div>
{% endblock %}