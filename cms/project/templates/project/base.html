{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/free_sched_style.css' %}">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script src="{% static 'js/custom.js' %}"></script>
    
    <title>Senior Project App</title>
  
    {% block styles %}{% endblock %}

    
  </head>
  <body class="body">
  
    
    <div class="wrapper">
      <div class="top_navbar">
        <div class="hamburger">
           <div class="hamburger__inner">
             <div class="one"></div>
             <div class="two"></div>
             <div class="three"></div>
           </div>
        </div>
        <div class="menu">
          <div class="logo">
            <a href="{% url 'home' %}" style="text-decoration: none; color: inherit;">SP Management System</a>
          </div>
          
          
          {% if user.is_authenticated%}

            <div class="right_menu">
              <ul>

                <!-- Add notification icon/link -->
                <li class="me-3">
                  <a href="{% url 'notifications' %}" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notification-count">0</span>
                  </a>
                </li>

                <li><i class="fas fa-user"></i>
                  <div class="profile_dd">
                    <div class="dd_item">Profile</div>
                    <div class="dd_item">Change Password</div>
                    <div class="dd_item"><a href="{% url 'logout' %}" style="text-decoration: none; color: inherit;"><i class="fas fa-sign-out-alt"></i> Logout</a></div>
                  </div>
                </li>
              </ul>
            </div>
          {% endif %}

        </div>
      </div>
    
    {% comment %} <div class="d-flex justify-content-between align-items-center">
      {% include 'project/navbar.html' %} {% endcomment %}

      {% comment %} {% if user.is_authenticated %}
        <div class="usecdr-designation d-flex align-items-center p-2 bg-light rounded shadow-sm position-fixed bottom-0 end-0 m-3">
          <span class="me-2 fw-bold">Logged in as:</span>
          <span>{{ user.get_full_name }}</span>
          
          {% if user.get_role_display == "Coordinator" and not user.is_current_coordinator %}
              <span class="text-danger ms-2">(Former Coordinator)</span>
          {% else %}
              <span class="text-muted ms-2">({{ user.get_role_display }})</span>
          {% endif %}
            
        </div>
      {% endif %} {% endcomment %}
    </div> 
    
      <div class="main_container">
          <div class="row">

  <!-- Include the sidebar here -->
   <div class=sidebar> 
      {% include 'project/sidebar.html' %}
    <div> 

      {% if messages %}
        <div class="alert-container">
          {% for message in messages %}
            <div class="alert alert-dismissible fade show {% if message.tags %}alert-{{ message.tags }}{% endif %}" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        </div> 
      {% endif %}
    
      <div class="container">
        {% block content %} <!-- content of all web pages go -->
        {% endblock %}
      </div>

     </div> 
  </div> 
        <br/> 
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    {% csrf_token %}
    
    <script src="{% static 'js/notifications.js' %}"></script>
    <script>
      $(document).ready(function() {
          $(".hamburger .hamburger__inner").click(function(){
              $(".wrapper").toggleClass("active");
              if ($(".wrapper").hasClass("active")) {
                // Collapse sidebar - hide all text content
                $(".sidebar").css("width", "98px"); 
                $(".profile_info").fadeOut(200);
                $(".sidebar-link-text").fadeOut(200);  
                $(".sidebar-menu-text").fadeOut(200);  

                // Hide dropdown arrows when collapsed
                $(".sidebar .dropdown-toggle::after").css("appearance", "none"); // Hide dropdown arrows
              
              } else {
                // Expand sidebar - show all text content
                $(".profile_info").fadeIn(200);
                $(".sidebar-link-text").fadeIn(200);   
                $(".sidebar-menu-text").fadeIn(200);   
                $(".sidebar").css("width", "300px"); 
              }
              $(".top_navbar .fas").click(function(){
                $(".profile_dd").toggleClass("active");
              });
          });
      });
  </script>
  </body>
</html>

